<% layout('layouts/boilerplate') %>

<div id="cluster-map" class="mb-3"></div>
<div class="container">
  <!-- <div> -->
  <h1 class="text-center">List of Campgrounds</h1>

  <!-- </div> -->

  <ol>
    <% for(let cg of campgrounds){ %>
    <div class="card mb-3">
      <div class="row">
        <!-- <div class="col-lg-4">
            <img src="+" alt="image" />
          </div> -->

        <div id="carouselExample<%=cg._id%>" class="col-lg-4 carousel slide">
          <div class="carousel-inner">
            <% cg.images.forEach((element,i) => { %>
            <div class="carousel-item <%= i===0?'active':'' %>">
              <img
                src="<%= element.url %>"
                crossorigin="anonymous"
                class="d-block w-100"
                alt="..."
              />
            </div>
            <% }) %>
          </div>
          <% if(cg.images.length>1){ %>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselExample<%=cg._id%>"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#carouselExample<%=cg._id%>"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
          <% } %>
        </div>
        <div class="col-lg-8">
          <div class="card-body">
            <h4><%= cg.title %></h4>
            <!-- <small class="text-mute"></small> -->
            <p><%= cg.description %></p>
            <a class="btn btn-success" href="/campgrounds/<%= cg._id %>"
              >More Details</a
            >
          </div>
        </div>
      </div>
    </div>
    <% } %>
  </ol>
</div>

<script>
  const mapToken = '<%-process.env.MAPTILER_API_KEY%>';
  const campgrounds = { features: <%- JSON.stringify(campgrounds) %>}
</script>

<script src="/javascripts/showClusterMap.js"></script>
